<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://tbnpg.settlebank.co.kr/resources/js/v1/SettlePG_v1.2.js"></script>
    <script>
        /*이용기관 등록 관련 JS*/
        function agencyStatus() {
            const agencyId = document.getElementById('agencyId').value;
            const siteId = document.getElementById('siteId').value;
            $.ajax({
                async      : false,
                url        : '/agency/status',
                type       : 'POST',
                contentType: 'application/json',
                data       : JSON.stringify({agencyId: agencyId, siteId: siteId}),
                success    : function (response) {
                    $("#agency_register").find("#agency_register_result").val(JSON.stringify(response));
                    console.log(JSON.stringify(response));
                },
                error      : function (xhr) {
                    $("#agency_register").find("#agency_register_result").val(xhr.responseText);
                    console.log(xhr.responseText);
                }
            });
        }

        function agencyRegister() {
            const agencyId = document.getElementById('agencyId').value;
            const siteId = document.getElementById('siteId').value;
            const companyName = document.getElementById('companyName').value;
            const businessType = document.getElementById('businessType').value;
            const bizNumber = document.getElementById('bizNumber').value;
            const ceoName = document.getElementById('ceoName').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const address = document.getElementById('address').value;
            const companySite = document.getElementById('companySite').value;
            const email = document.getElementById('email').value;
            const rateSel = document.getElementById('rateSel').value;
            const startDate = document.getElementById('startDate').value;


            const settleManagerName = document.getElementById('settleManagerName').value;
            const settleManagerPhoneNumber = document.getElementById('settleManagerPhoneNumber').value;
            const settleManagerEmail = document.getElementById('settleManagerEmail').value;

            $.ajax({
                async      : false,
                url        : '/agency/regSiteInfo',
                type       : 'POST',
                contentType: 'application/json',
                data       : JSON.stringify({
                    agencyId                : agencyId,
                    siteId                  : siteId,
                    companyName             : companyName,
                    businessType            : businessType,
                    bizNumber               : bizNumber,
                    ceoName                 : ceoName,
                    phoneNumber             : phoneNumber,
                    address                 : address,
                    companySite             : companySite,
                    email                   : email,
                    rateSel                 : rateSel,
                    startDate               : startDate,
                    settleManagerName       : settleManagerName,
                    settleManagerPhoneNumber: settleManagerPhoneNumber,
                    settleManagerEmail      : settleManagerEmail
                }),
                success    : function (response) {
                    $("#agency_register").find("#agency_register_result").val(JSON.stringify(response));
                    console.log(JSON.stringify(response));
                },
                error      : function (xhr) {
                    $("#agency_register").find("#agency_register_result").val(xhr.responseText);
                    console.log(xhr.responseText);
                }
            });
        }


        /*결제 페이지 이동*/
        function goProduct() {
            const agencyId = document.getElementById('agencyId').value;
            const siteId = document.getElementById('siteId').value;
            var profileSpecificUrl = 'http://127.0.0.1:9000'
            window.location.href = profileSpecificUrl+"/agency/payment.html?agencyId="+agencyId+"&siteId="+siteId;
        }

    </script>
</head>
<body>


<div style="display: flex; height: 400px" id="agency_register">
    <div style="display: inline-flex; flex-direction: column; height: 100%;">
<!--        <button onclick="agencyStatus();" style="flex:auto">제휴사 이용기관 등록조회 (STEP 확인용)</button>-->
        <button onclick="agencyRegister();" style="flex:auto">제휴사 이용기관 등록</button>
        <table>
            <tr>
                <th>제휴사</th>
                <td>
                    <select name="agencyId" id="agencyId" style="width: 100%;">
                        <option value='SQUARES'>스퀘어스</option>
                        <option value='CAFE24'>카페24</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>상점Id</th>
                <td><input name="siteId" id="siteId"></td>
            </tr>
            <tr>
                <th>회사명</th>
                <td><input name="companyName" id="companyName"></td>
            </tr>
            <tr>
                <th>사업자 구분</th>
                <td>
                    <select name="businessType" id="businessType" style="width: 100%;">
                        <option value=''>전 체</option>
                        <option value='1'>공공기관</option>
                        <option value='2'>개인</option>
                        <option value='3'>법인</option>
                        <option value='4'>연구소</option>
                        <option value='5'>교육</option>
                        <option value='6'>국방</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>사업자 등록번호 또는 기관번호</th>
                <td><input name="bizNumber" id="bizNumber" maxlength="10" placeholder="0000000000"></td>
            </tr>
            <tr>
                <th>대표이사명</th>
                <td><input name="ceoName" id="ceoName" maxlength="50" placeholder="김드림"></td>
            </tr>
            <tr>
                <th>이용기관 전화번호</th>
                <td><input name="phoneNumber" id="phoneNumber" maxlength="20"></td>
            </tr>
            <tr>
                <th>이용기관 회사주소</th>
                <td><input name="address" id="address"></td>
            </tr>
            <tr>
                <th>이용기관 홈페이지</th>
                <td><input name="companySite" id="companySite"></td>
            </tr>
            <tr>
                <th>이용기관 이메일</th>
                <td><input name="email" id="email"></td>
            </tr>
            <tr>
                <th>상품 제휴사 선택시 상품코드</th>
                <td><input name="rateSel" id="rateSel"></td>
            </tr>
            <tr>
                <th>서비스시작날짜</th>
                <td><input name="startDate" id="startDate"></td>
            </tr>

            <tr><td></td></tr>
            <tr><td></td></tr>

            <tr>
                <th>정산담당자 이름</th>
                <td><input name="settleManagerName" id="settleManagerName"></td>
            </tr>
            <tr>
                <th>정산담당자 전화번호</th>
                <td><input name="settleManagerPhoneNumber" id="settleManagerPhoneNumber"></td>
            </tr>
            <tr>
                <th>정산담당자 E-Mail</th>
                <td><input name="settleManagerEmail" id="settleManagerEmail"></td>
            </tr>
        </table>
    </div>
    <textarea id="agency_register_result" cols="50" rows="6"></textarea>

    <table>
        <tr>
            <td>
                <div style="display: flex; height: 30px" id="goProduct">
                    <div style="display: inline-flex; flex-direction: column; height: 100%;">
                        <button onclick="goProduct();" style="flex:auto">결제 페이지 이동</button>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</div>

</body>
</html>